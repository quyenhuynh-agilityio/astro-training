---
import Heading from '@components/Heading/index.astro';
import PropertyCard from '@components/PropertyCard/index.astro';
import Select from '@components/Select';
import PortableText from '@components/PortableText/index.astro';
import PortableTextImage from '@components/PortableTextImage/index.astro';

interface PropertyItem {
  slug: string;
  title: any;
  mainImage: any;
  beds: number;
  baths: number;
  sun: number;
}

interface Props {
  title?: any; // PortableText array
  properties: PropertyItem[];
}

const { title, properties } = Astro.props as Props;

const options = [
  { value: '', label: 'Looking for' },
  { value: 'rent', label: 'Rent' },
  { value: 'buy', label: 'Buy' },
];

const locations = [
  { value: '', label: 'Location' },
  { value: 'ny', label: 'New York' },
  { value: 'sf', label: 'San Francisco' },
];

const types = [
  { value: '', label: 'Property Type' },
  { value: 'house', label: 'House' },
  { value: 'apartment', label: 'Apartment' },
];

const prices = [
  { value: '', label: 'Price' },
  { value: 'low', label: 'Low to High' },
  { value: 'high', label: 'High to Low' },
];
---

<section class="py-16 bg-bodyBg">
  <div class="max-w-7xl mx-auto px-4">
    <!-- Heading using PortableText -->
    <Heading {title} />

    <!-- Filters -->
    <div
      class="flex flex-col md:flex-row w-fit gap-4 bg-white shadow-md rounded-xl my-10"
    >
      <Select
        className="w-full md:flex-1 border-r border-accent rounded-tl-xl rounded-bl-xl"
        {options}
        name="lookingFor"
        ariaLabel="Looking for"
      />
      <Select
        className="w-full md:flex-1 border-r border-accent"
        options={locations}
        name="location"
        ariaLabel="Location"
      />
      <Select
        className="w-full md:flex-1 border-r border-accent"
        options={types}
        name="propertyType"
        ariaLabel="Property Type"
      />
      <Select
        className="w-full md:flex-1 rounded-tr-xl rounded-br-xl"
        options={prices}
        name="price"
        ariaLabel="Price"
      />
    </div>

    <!-- Property Grid -->
    <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        properties.map((property) => (
          <li id={property.slug}>
            <PropertyCard
              slug={property.slug}
              image={property.mainImage}
              title={property.title}
              beds={property.beds}
              baths={property.baths}
              area={property.sun}
            />
          </li>
        ))
      }
    </ul>
  </div>
</section>
